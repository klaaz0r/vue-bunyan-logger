!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.vue_bunyan_logger=r()}(this,function(){var e={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},r={};function t(r){return"string"==typeof r?e[r.toLowerCase()]:r}Object.keys(e).forEach(function(t){r[e[t]]=t});var s="call-stack-error";function i(e){if(void 0===e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}return e}function n(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"[ "+e.map(function(e){return n(e)}).join(", ")+" ]":"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"}function o(e){var r=arguments;if("string"!=typeof e){for(var t=new Array(arguments.length),s=0;s<arguments.length;s++)t[s]=n(r[s]);return t.join(" ")}for(var i=1,o=arguments,l=o.length,a=String(e).replace(/%[sdj%]/g,function(e){if("%%"===e)return"%";if(i>=l)return e;switch(e){case"%s":return String(o[i++]);case"%d":return Number(o[i++]);case"%j":try{return JSON.stringify(o[i++])}catch(e){return"[Circular]"}default:return e}}),c=o[i];i<l;c=o[++i])a+=" "+c;return a}var l={};function a(e,r){if(r){if(l[r])return;l[r]=!0}console.error(e+"\n")}var c=function(){};c.prototype.write=function(e){e.level<30?console.log(e):e.level<40?console.info(e):e.level<50?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)};var f=1,u=function e(r,t,s){var n,o,l,a,f=this;if(!(this instanceof e))return new e(r,t);if(void 0!==t&&(n=r,r=t,!(n instanceof e)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!r)throw new TypeError("options (object) is required");if(n){if(r.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!r.name)throw new TypeError("options.name (string) is required");if(r.stream&&r.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(r.streams&&!Array.isArray(r.streams))throw new TypeError("invalid options.streams: must be an array");if(r.serializers&&("object"!=typeof r.serializers||Array.isArray(r.serializers)))throw new TypeError("invalid options.serializers: must be an object");if(n&&s){this._level=n._level,this.streams=n.streams,this.serializers=n.serializers,this.src=n.src,o=this.fields={};var u=Object.keys(n.fields);for(a=0;a<u.length;a++)l=u[a],o[l]=n.fields[l];var h=Object.keys(r);for(a=0;a<h.length;a++)l=h[a],o[l]=r[l]}else{if(n){for(this._level=n._level,this.streams=[],a=0;a<n.streams.length;a++){var v=i(n.streams[a]);f.streams.push(v)}this.serializers=i(n.serializers),this.src=n.src,this.fields=i(n.fields),r.level&&this.level(r.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};r.stream?this.addStream({type:"stream",stream:r.stream,level:r.level}):r.streams?r.streams.forEach(function(e){f.addStream(e,r.level)}):n&&r.level?this.level(r.level):n||this.addStream({type:"raw",stream:new c,level:r.level}),r.serializers&&this.addSerializers(r.serializers),r.src&&(this.src=!0),delete(o=i(r)).stream,delete o.level,delete o.streams,delete o.serializers,delete o.src,this.serializers&&this._applySerializers(o),Object.keys(o).forEach(function(e){f.fields[e]=o[e]})}};function h(e){return function(){var t=this;var n=null,c=arguments,u=null;if(0===arguments.length)return this._level<=e;this._level>e||(u=function(u){var h;u[0]instanceof Error?(n={err:t.serializers&&t.serializers.err?t.serializers.err(u[0]):v.err(u[0])},h={err:!0},c=1===u.length?[n.err.message]:Array.prototype.slice.call(u,1)):"object"!=typeof u[0]&&null!==u[0]||Array.isArray(u[0])?(n=null,c=Array.prototype.slice.call(u)):(n=u[0],c=1===u.length&&n.err&&n.err instanceof Error?[n.err.message]:Array.prototype.slice.call(u,1));var p=i(t.fields);p.level=e;var y=n?i(n):null;if(y&&(t.serializers&&t._applySerializers(y,h),Object.keys(y).forEach(function(e){p[e]=y[e]})),p.levelName=r[e],p.msg=c.length?o.apply(t,c):"",p.time||(p.time=new Date),t.src&&!p.src)try{throw new Error(s)}catch(e){var m=function(e,r){var t=e.split("\n");t[0]&&t[0].indexOf(s)>=0&&t.shift();var i=t[r],n=null;if(i){var o=/^\s*(at|.*@)\s*(.+)?$/.exec(i);n=Array.isArray(o)&&o[2]?o[2]:i}return n}(e.stack,2);m||l.src||a("Unable to determine src line info","src"),p.src=m||""}return p.v=f,p}(c),this._emit(u))}}u.prototype.addStream=function(e,r){void 0===r&&(r=30),(e=i(e)).type="raw",e.level=t(e.level||r),e.level<this._level&&(this._level=e.level),this.streams.push(e),delete this.haveNonRawStreams},u.prototype.addSerializers=function(e){var r=this;this.serializers||(this.serializers={}),Object.keys(e).forEach(function(t){var s=e[t];if("function"!=typeof s)throw new TypeError(o('invalid serializer for "%s" field: must be a function',t));r.serializers[t]=s})},u.prototype.child=function(e,r){return new this.constructor(this,e||{},r)},u.prototype.level=function(e){if(void 0===e)return this._level;for(var r=t(e),s=this.streams.length,i=0;i<s;i++)this.streams[i].level=r;this._level=r},u.prototype.levels=function(e,r){var s;if(void 0===e)return this.streams.map(function(e){return e.level});if("number"==typeof e){if(void 0===(s=this.streams[e]))throw new Error("invalid stream index: "+e)}else{for(var i=this.streams.length,n=0;n<i;n++){var l=this.streams[n];if(l.name===e){s=l;break}}if(!s)throw new Error(o('no stream with name "%s"',e))}if(void 0===r)return s.level;var a=t(r);s.level=a,a<this._level&&(this._level=a)},u.prototype._applySerializers=function(e,r){var t=this;Object.keys(this.serializers).forEach(function(s){if(!(void 0===e[s]||r&&r[s]))try{e[s]=t.serializers[s](e[s])}catch(r){a(o('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',s,r.stack||r)),e[s]=o('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',s)}})},u.prototype._emit=function(e,r){var t,s,i,n,l;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,t=0;t<this.streams.length;t++)if(!this.streams[t].raw){this.haveNonRawStreams=!0;break}if(r||this.haveNonRawStreams)try{s=JSON.stringify(e,(l=[],function(e,r){return r&&"object"==typeof r?-1!==l.indexOf(r)?"[Circular]":(l.push(r),r):r}))+"\n"}catch(r){var c=r.stack.split(/\n/g,2).join("\n");a('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+(i=o("%s\n%s",e,r.stack),n||(n="    "),n+i.split(/\r?\n/g).join("\n"+n)),c),s=o("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",r.message)}if(r)return s;var f=e.level;for(t=0;t<this.streams.length;t++){var u=this.streams[t];u.level<=f&&u.stream.write(e)}return s},u.prototype.trace=h(10),u.prototype.debug=h(20),u.prototype.info=h(30),u.prototype.warn=h(40),u.prototype.error=h(50),u.prototype.fatal=h(60);var v={err:function(e){return e&&e.stack?{message:e.message,name:e.name,stack:function e(r){var t=r.stack||r.toString();if(r.cause&&"function"==typeof r.cause){var s=r.cause();s&&(t+="\nCaused by: "+e(s))}return t}(e),code:e.code,signal:e.signal}:e}};var p={levels:{trace:"color: DeepPink",debug:"color: GoldenRod",info:"color: DarkTurquoise",warn:"color: Purple",error:"color: Crimson",fatal:"color: Black"},def:"color: DimGray",msg:"color: SteelBlue",src:"color: DimGray; font-style: italic; font-size: 0.9em"},y=function(e){void 0===e&&(e={});var r=e.logByLevel;void 0===r&&(r=!1);var t=e.css;void 0===t&&(t=p),this.logByLevel=r,this.css=t};y.prototype.write=function(e){var t,s,i=this.css.def,n=this.css.msg,o=this.css.src,l=e.childName?e.name+"/"+e.childName:e.name,a=r[e.level],c=(Array(6-a.length).join(" ")+a).toUpperCase();this.logByLevel?(10===e.level?a="debug":60===e.level&&(a="error"),s="function"==typeof console[a]?console[a]:console.log):s=console.log,t=e.level<20?this.css.levels.trace:e.level<30?this.css.levels.debug:e.level<40?this.css.levels.info:e.level<50?this.css.levels.warn:e.level<60?this.css.levels.error:this.css.levels.fatal;var f=function(e,r){return Array(r+1-(e+"").length).join("0")+e},u=[];u.push("[%s:%s:%s:%s] %c%s%c: %s: %c%s "+(e.src?"%c%s":"")),u.push(f(e.time.getHours(),2)),u.push(f(e.time.getMinutes(),2)),u.push(f(e.time.getSeconds(),2)),u.push(f(e.time.getMilliseconds(),4)),u.push(t),u.push(c),u.push(i),u.push(l),u.push(n),u.push(e.msg),e.src&&(u.push(o),u.push(e.src)),s.apply(console,u),e.err&&e.err.stack&&s.call(console,"%c%s,",t,e.err.stack),e.obj&&s.call(console,e.obj)},y.getDefaultCss=function(){return p};var m=function(e){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return new(Function.prototype.bind.apply(u,[null].concat(e)))}({name:e.name,level:e.level,stream:new y,serializers:v,src:!0})};return{install:function(e,r){e.prototype.$log=m(r)}}});
//# sourceMappingURL=index.umd.js.map
