var e=10,r=20,t=30,s=40,i=50,n=60,l={trace:e,debug:r,info:t,warn:s,error:i,fatal:n},o={};function a(e){return"string"==typeof e?l[e.toLowerCase()]:e}Object.keys(l).forEach(function(e){o[l[e]]=e});var c="call-stack-error";function f(e){if(void 0===e||null===e)return e;if(Array.isArray(e))return e.slice();if("object"==typeof e){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}return e}function u(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"[ "+e.map(function(e){return u(e)}).join(", ")+" ]":"object"==typeof e?JSON.stringify(e):"function"==typeof e?"[Function: "+e.name+"]":"boolean"==typeof e||"number"==typeof e?e:"'"+e.toString()+"'"}function h(e){var r=arguments;if("string"!=typeof e){for(var t=new Array(arguments.length),s=0;s<arguments.length;s++)t[s]=u(r[s]);return t.join(" ")}for(var i=1,n=arguments,l=n.length,o=String(e).replace(/%[sdj%]/g,function(e){if("%%"===e)return"%";if(i>=l)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}}),a=n[i];i<l;a=n[++i])o+=" "+a;return o}function v(e,r){var t=e.split("\n");t[0]&&t[0].indexOf(c)>=0&&t.shift();var s=t[r],i=null;if(s){var n=/^\s*(at|.*@)\s*(.+)?$/.exec(s);i=Array.isArray(n)&&n[2]?n[2]:s}return i}function p(e,r){return r||(r="    "),r+e.split(/\r?\n/g).join("\n"+r)}var m={};function y(e,r){if(r){if(m[r])return;m[r]=!0}console.error(e+"\n")}function d(e){return m[e]}function g(){var e=[];return function(r,t){return t&&"object"==typeof t?-1!==e.indexOf(t)?"[Circular]":(e.push(t),t):t}}var w=function(){};w.prototype.write=function(e){e.level<t?console.log(e):e.level<s?console.info(e):e.level<i?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)};var b=1,z=function e(r,t,s){var i,n,l,o,a=this;if(!(this instanceof e))return new e(r,t);if(void 0!==t&&(i=r,r=t,!(i instanceof e)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!r)throw new TypeError("options (object) is required");if(i){if(r.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!r.name)throw new TypeError("options.name (string) is required");if(r.stream&&r.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(r.streams&&!Array.isArray(r.streams))throw new TypeError("invalid options.streams: must be an array");if(r.serializers&&("object"!=typeof r.serializers||Array.isArray(r.serializers)))throw new TypeError("invalid options.serializers: must be an object");if(i&&s){this._level=i._level,this.streams=i.streams,this.serializers=i.serializers,this.src=i.src,n=this.fields={};var c=Object.keys(i.fields);for(o=0;o<c.length;o++)l=c[o],n[l]=i.fields[l];var u=Object.keys(r);for(o=0;o<u.length;o++)l=u[o],n[l]=r[l]}else{if(i){for(this._level=i._level,this.streams=[],o=0;o<i.streams.length;o++){var h=f(i.streams[o]);a.streams.push(h)}this.serializers=f(i.serializers),this.src=i.src,this.fields=f(i.fields),r.level&&this.level(r.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};r.stream?this.addStream({type:"stream",stream:r.stream,level:r.level}):r.streams?r.streams.forEach(function(e){a.addStream(e,r.level)}):i&&r.level?this.level(r.level):i||this.addStream({type:"raw",stream:new w,level:r.level}),r.serializers&&this.addSerializers(r.serializers),r.src&&(this.src=!0),delete(n=f(r)).stream,delete n.level,delete n.streams,delete n.serializers,delete n.src,this.serializers&&this._applySerializers(n),Object.keys(n).forEach(function(e){a.fields[e]=n[e]})}};function j(e){return function(){var r=this;var t=null,s=arguments,i=null;if(0===arguments.length)return this._level<=e;this._level>e||(i=function(i){var n;i[0]instanceof Error?(t={err:r.serializers&&r.serializers.err?r.serializers.err(i[0]):k.err(i[0])},n={err:!0},s=1===i.length?[t.err.message]:Array.prototype.slice.call(i,1)):"object"!=typeof i[0]&&null!==i[0]||Array.isArray(i[0])?(t=null,s=Array.prototype.slice.call(i)):(t=i[0],s=1===i.length&&t.err&&t.err instanceof Error?[t.err.message]:Array.prototype.slice.call(i,1));var l=f(r.fields);l.level=e;var a=t?f(t):null;if(a&&(r.serializers&&r._applySerializers(a,n),Object.keys(a).forEach(function(e){l[e]=a[e]})),l.levelName=o[e],l.msg=s.length?h.apply(r,s):"",l.time||(l.time=new Date),r.src&&!l.src)try{throw new Error(c)}catch(e){var u=v(e.stack,2);u||d("src")||y("Unable to determine src line info","src"),l.src=u||""}return l.v=b,l}(s),this._emit(i))}}function S(e){var r=e.stack||e.toString();if(e.cause&&"function"==typeof e.cause){var t=e.cause();t&&(r+="\nCaused by: "+S(t))}return r}z.prototype.addStream=function(e,r){void 0===r&&(r=t),(e=f(e)).type="raw",e.level=a(e.level||r),e.level<this._level&&(this._level=e.level),this.streams.push(e),delete this.haveNonRawStreams},z.prototype.addSerializers=function(e){var r=this;this.serializers||(this.serializers={}),Object.keys(e).forEach(function(t){var s=e[t];if("function"!=typeof s)throw new TypeError(h('invalid serializer for "%s" field: must be a function',t));r.serializers[t]=s})},z.prototype.child=function(e,r){return new this.constructor(this,e||{},r)},z.prototype.level=function(e){if(void 0===e)return this._level;for(var r=a(e),t=this.streams.length,s=0;s<t;s++)this.streams[s].level=r;this._level=r},z.prototype.levels=function(e,r){var t;if(void 0===e)return this.streams.map(function(e){return e.level});if("number"==typeof e){if(void 0===(t=this.streams[e]))throw new Error("invalid stream index: "+e)}else{for(var s=this.streams.length,i=0;i<s;i++){var n=this.streams[i];if(n.name===e){t=n;break}}if(!t)throw new Error(h('no stream with name "%s"',e))}if(void 0===r)return t.level;var l=a(r);t.level=l,l<this._level&&(this._level=l)},z.prototype._applySerializers=function(e,r){var t=this;Object.keys(this.serializers).forEach(function(s){if(!(void 0===e[s]||r&&r[s]))try{e[s]=t.serializers[s](e[s])}catch(r){y(h('bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.\n%s',s,r.stack||r)),e[s]=h('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',s)}})},z.prototype._emit=function(e,r){var t,s;if(void 0===this.haveNonRawStreams)for(this.haveNonRawStreams=!1,t=0;t<this.streams.length;t++)if(!this.streams[t].raw){this.haveNonRawStreams=!0;break}if(r||this.haveNonRawStreams)try{s=JSON.stringify(e,g())+"\n"}catch(r){var i=r.stack.split(/\n/g,2).join("\n");y('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+p(h("%s\n%s",e,r.stack)),i),s=h("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",r.message)}if(r)return s;var n=e.level;for(t=0;t<this.streams.length;t++){var l=this.streams[t];l.level<=n&&l.stream.write(e)}return s},z.prototype.trace=j(e),z.prototype.debug=j(r),z.prototype.info=j(t),z.prototype.warn=j(s),z.prototype.error=j(i),z.prototype.fatal=j(n);var k={err:function(e){return e&&e.stack?{message:e.message,name:e.name,stack:S(e),code:e.code,signal:e.signal}:e}};function E(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return new(Function.prototype.bind.apply(z,[null].concat(e)))}var _={levels:{trace:"color: DeepPink",debug:"color: GoldenRod",info:"color: DarkTurquoise",warn:"color: Purple",error:"color: Crimson",fatal:"color: Black"},def:"color: DimGray",msg:"color: SteelBlue",src:"color: DimGray; font-style: italic; font-size: 0.9em"},A=function(e){void 0===e&&(e={});var r=e.logByLevel;void 0===r&&(r=!1);var t=e.css;void 0===t&&(t=_),this.logByLevel=r,this.css=t};A.prototype.write=function(l){var a,c,f=this.css.def,u=this.css.msg,h=this.css.src,v=l.childName?l.name+"/"+l.childName:l.name,p=o[l.level],m=(Array(6-p.length).join(" ")+p).toUpperCase();this.logByLevel?(l.level===e?p="debug":l.level===n&&(p="error"),c="function"==typeof console[p]?console[p]:console.log):c=console.log,a=l.level<r?this.css.levels.trace:l.level<t?this.css.levels.debug:l.level<s?this.css.levels.info:l.level<i?this.css.levels.warn:l.level<n?this.css.levels.error:this.css.levels.fatal;var y=function(e,r){return Array(r+1-(e+"").length).join("0")+e},d=[];d.push("[%s:%s:%s:%s] %c%s%c: %s: %c%s "+(l.src?"%c%s":"")),d.push(y(l.time.getHours(),2)),d.push(y(l.time.getMinutes(),2)),d.push(y(l.time.getSeconds(),2)),d.push(y(l.time.getMilliseconds(),4)),d.push(a),d.push(m),d.push(f),d.push(v),d.push(u),d.push(l.msg),l.src&&(d.push(h),d.push(l.src)),c.apply(console,d),l.err&&l.err.stack&&c.call(console,"%c%s,",a,l.err.stack),l.obj&&c.call(console,l.obj)},A.getDefaultCss=function(){return _};var O=E({name:"formatted",streams:[{level:"info",stream:new A},{level:"warn",stream:new A},{level:"error",stream:new A},{level:"debug",stream:new A},{level:"fatal",stream:new A}],serializers:k,src:!0}),N={install:function(e,r){e.prototype.$log=O}};module.exports=N;
//# sourceMappingURL=index.js.map
